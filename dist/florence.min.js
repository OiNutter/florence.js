var florence=function(t,e){function i(t){return t.toLowerCase()}function n(t){return C?C+t:i(t)}function r(t){if("object"!=typeof t)return[];var e,i=[];for(e in t)i.push(e);return i}function a(t){if("object"!=typeof t)return[];var e,i=[];for(e in t)i.push(t[e]);return i}function l(t,e){var i,n;for(i in e)if(a(t[i]).length>0&&a(e[i]).length>0)for(n in e[i])t[i][n]=e[i][n];else t[i]=e[i];return t}function o(t){var e=window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle;return{height:parseFloat(e.height)+(parseFloat(e.paddingTop)||0)+(parseFloat(e.paddingBottom)||0)+(parseFloat(e.borderTopWidth)||0)+(parseFloat(e.borderBottomWidth)||0),width:parseFloat(e.width)+(parseFloat(e.paddingLeft)||0)+(parseFloat(e.paddingRight)||0)+(parseFloat(e.borderLeftWidth)||0)+(parseFloat(e.borderRightWidth)||0),margin:{top:parseFloat(e.marginTop)||0,right:parseFloat(e.marginRight)||0,bottom:parseFloat(e.marginBottom)||0,left:parseFloat(e.marginLeft)||0},padding:{top:parseFloat(e.paddingTop)||0,right:parseFloat(e.paddingRight)||0,bottom:parseFloat(e.paddingBottom)||0,left:parseFloat(e.paddingLeft)||0}}}function s(t){return t._zid||(t._zid=_++)}function p(t,e,i){var n,r,a=s(t),l=e.split(" ");for(X[a]||(X[a]={}),n=0;n<l.length;n++)r=l[n],X[a][r]||(X[a][r]=[]),X[a][r].push(i),t.addEventListener?t.addEventListener(r,i,!1):t.attachEvent(r,i)}function u(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent(e,i)}function f(t,e,i){var n=s(t);if(X[n]&&X[n][e])for(var r=0;r<X[n][e].length;r++)(null==i||i==X[n][e][r])&&(X[n][e].splice(r,1),u(t,e,X[n][e][r]))}function g(t,e,i){return parseFloat(t+(e-t)*i).toFixed(3)}function d(t,e,i){return t.substr(e,i||1)}function h(t,e,i){for(var n,r,a,l=2,o=[],s=[];n=3,r=arguments[l-1],l--;)if("r"==d(r,0))for(r=r.match(/\d+/g);n--;)o.push(~~r[n]);else for(4==r.length&&(r="#"+d(r,1)+d(r,1)+d(r,2)+d(r,2)+d(r,3)+d(r,3));n--;)o.push(parseInt(d(r,1+2*n,2),16));for(;n--;)a=~~(o[n+3]+(o[n]-o[n+3])*i),s.push(0>a?0:a>255?255:a);return"rgb("+s.join(",")+")"}function c(t){var e=parseFloat(t),i=t.replace(/^[\-\d\.]+/,"");return isNaN(e)?{v:i,f:h,u:""}:{v:e,f:g,u:i}}function y(t,e,i){var r,a,l,o,s,u,g=[],d=(new Date).getTime(),h=1e3*F.duration,y=d+h,m=t.currentStyle?t.currentStyle:getComputedStyle(t,null),v={},w={};if(""!=q){for(r in e)g.push(r);t.style.setProperty(q+"transition-property",g.join(", "),""),t.style.setProperty(q+"transition-duration",F.duration+"s",""),t.style.setProperty(q+"transition-timing-function",F.easing,""),f(t,n("TransitionEnd")),F.duration>0&&p(t,n("TransitionEnd"),i);for(r in e)t.style[r]=e[r]}else{for(l in e)w[l]=c(e[l]);for(l in e)v[l]=c("opacity"===l?D(m):m[l]);a=setInterval(function(){o=(new Date).getTime(),s=o>y?1:(o-d)/h;for(l in w)u=w[l].f(v[l].v,w[l].v,j[F.easing](s))+w[l].u,"opacity"===l?k(t,u):t.style[l]=u;o>y&&(clearInterval(a),void 0!==i&&i.call())},10)}}function m(){if(I){var t=re.width+re.padding.left+re.padding.right+re.margin.left+re.margin.right,e=Math.abs(parseInt(P.style.left)%t);A=parseInt(P.style.left),0!=e&&v(e>t/2?t-e+oe.padding.left:-(e+oe.margin.left),!0),I=null}}function v(t,e){null==e&&(e=!1),-le>A-t&&(t=A+le),A-t>0&&(t=A),e?y(P,{left:A-t+"px"}):P.style.left=A-t+"px"}function w(){var t,e=0,i=0,n=0,r=0,a=0,l=0,s=0,p=0,u=0,f=0;for(t=0;t<V.length;t++)S=o(V[t]),a=S.padding.left+S.padding.right,l=S.padding.top+S.padding.bottom,u=S.margin.left+S.margin.right,f=S.margin.top+S.margin.bottom,a>n&&(n=a),l>r&&(r=l),u>s&&(s=u),f>p&&(p=f),S.width>e&&(e=S.width-n),S.height>i&&(i=S.height-r);for("auto"!=F.numVisible&&e+s>oe.width/F.numVisible&&(e=Math.floor(oe.width/F.numVisible)-n-s),i+p>oe.height&&(i=oe.height-r-p),t=0;t<V.length;t++)V[t].style.position="absolute",V[t].style.width=e+"px",V[t].style.height=i+"px",V[t].style.left="0px",V[t].style.top="0px",B?V[t].style.opacity=1:V[t].style.filter="alpha(opacity=100)";re=o(V[0])}var b,x,F,P,V,S,I,A,E={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},M=window.document,T=M.createElement("div"),O={},j={ease:function(t){return-Math.cos(t*Math.PI)/2+.5},linear:function(t){return t}},L=!1,q="",C="",R=[],W=[],B="string"==typeof T.style.opacity,N="string"==typeof T.style.filter,z=/alpha\(opacity=([^\)]+)\)/,k=function(){},D=function(){return"1"},X={},_=1,G=function(){return!0};B?(k=function(t,e){t.style.opacity=parseFloat(e)},D=function(t){return t.opacity}):N&&(k=function(t,e){var i=t.style;e=parseFloat(e),z.test(i.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",i.filter=i.filter.replace(z,e)):i.filter+=" alpha(opacity="+100*e+")"},D=function(t){var e=t.filter.match(z);return(e?e[1]/100:1)+""});var H=function(){if(0!=b){var t=re.width+re.padding.left+re.padding.right+re.margin.left+re.margin.right;y(P,{left:parseInt(P.style.left)+t+"px"}),b--}},J=function(){if(!(b+F.numVisible>=R.length)){var t=re.width+re.padding.left+re.padding.right+re.margin.left+re.margin.right;y(P,{left:parseInt(P.style.left)-t+"px"}),b++}},K=function(t,e){if(L||R.length<=F.numVisible)return!1;null==e&&(e=!0);var i,n,r,a,l="string"==typeof t?x.querySelector(t):t,o=R.indexOf(l);-1!=o&&(i=o-(Math.ceil(F.numVisible/2)-1),n=re.width+re.padding.left+re.padding.right+re.margin.left+re.margin.right,0>i&&(i=0),i+F.numVisible>=R.length&&(i=R.length-F.numVisible),r=i-b,b=i,a=parseInt(P.style.left)-n*r+"px",e?y(P,{left:a}):P.style.left=a)},Q=function(t){if(I){var e=I-t.clientX;v(e)}},b=function(){return b},U=function(){return R.length},Y=function(t){var e=R.indexOf(t);return currentPage(),numPerPage=F.rows*F.numVisible,start=(currentPage()-1)*numPerPage,end=start+numPerPage<=R.length?start+numPerPage:R.length,-1!=e&&e>=start&&end>e},Z=function(t){if(!V.length)return!1;var e,i,n,r,a=0,l=0,o={};for(("string"==typeof t||Array.isArray(t))&&("string"==typeof t&&(t=[t]),n="(?=.*\\b("+t.join(")\\b)(?=.*\\b(")+")\\b)",t=function(t){return new RegExp(n).test(t.className)}),G=t,R=[],y(P,{left:oe.padding.left+"px"}),i=0;i<W.length;i++)r=W[i],t(r)?(R.push(r),e=(re.width+re.margin.right+re.margin.left)*a+oe.width*l,o={top:"0px",left:e+"px",opacity:"1"},a++):o={opacity:"0"},y(W[i],o);return b=0,le=R.length*(re.width+re.padding.left+re.padding.right+re.margin.left+re.margin.right)-oe.width,R},$=function(t,e){if(!V.length)return!1;null==e&&(e=!0);var i,n,r,a=0,l=0,o={},s=[];for(W=[],n=0;n<t.length;n++)r="string"==typeof t[n]?x.querySelector(t[n]):t[n],W.push(r),-1!=R.indexOf(r)&&(s.push(r),i=(re.width+re.margin.right+re.margin.left)*a+oe.width*l,o={top:"0px",left:i+"px",opacity:"1"},e?y(r,o):(r.style.top=o.top,r.style.left=o.left,B?V[n].style.opacity=o.opacity:V[n].style.filter="alpha(opacity="+10*parseInt(o.opacity)+")"),a++);return R=s,b=0,W},te=function(t){var e;for(R=W=[],e=0;e<V.length;e++)R.push(V[e]);W=R,$(W,t),le=R.length*(re.width+re.padding.left+re.padding.right+re.margin.left+re.margin.right)-oe.width},ee=function(t,e){var i=G(t);return t.style.position="absolute",t.style.width=re.width-re.padding.left-re.padding.right+"px",t.style.height=re.height-re.padding.top-re.padding.bottom+"px",t.style.left=oe.width+50+"px",B?t.style.opacity=i?1:0:t.style.filter="alpha(opacity="+(i?100:0)+")",P.appendChild(t),i&&R.splice(e-1,0,t),null!=e?W.splice(e-1,0,t):W.push(t),V=x.querySelectorAll(F.selector),$(W),R},ie=function(t){var e=R.indexOf(t),i=e==R.length-1&&1==R.length%(F.rows*F.numVisible);return W.splice(W.indexOf(t),1),R.splice(e,1),P.removeChild(t),V=x.querySelectorAll(F.selector),R.length&&$(W),i&&K(currentPage()-1),R},ne=function(){return R.slice((currentPage()-1)*F.numVisible,F.numVisible)};if("string"==typeof t&&null==M.querySelector(t))throw"Element "+t+" does not exist!";if(x="string"==typeof t?M.querySelector(t):t,F=l({selector:"div.florence-item",numVisible:"auto",duration:.5,easing:"ease",slider:"div.florence-slider",width:null,height:null,start:1},e),x.style.overflow="hidden",""==x.style.position&&(x.style.position="relative"),null!=F.width&&(x.style.width=F.width+"px"),null!=F.height&&(x.style.height=F.height+"px"),V=x.querySelectorAll(F.selector),!V.length)throw"Gallery is empty";var re,ae,P,le,oe=o(x),se=a(E),pe=r(E);return"auto"==F.numVisible&&(re=o(V[0]),ae=re.width+re.margin.left+re.margin.right,F.numVisible=Math.floor(oe.width/ae)),w(),b=F.start-1,P=x.querySelector(F.slider),P.style.left=oe.padding.left+"px",P.style.position="relative",p(x,"mousedown",function(t){I=t.clientX-t.currentTarget.style.left,A=parseInt(P.style.left)}),p(M,"mouseup mouseleave",m),p(x,"mousemove",Q),function(){for(var t=0;t<pe.length;t++)if(void 0!==T.style[pe[t]+"TransitionProperty"])return q="-"+i(pe[t])+"-",C=se[t],!1}(),O[q+"transition-property"]=O[q+"transition-duration"]=O[q+"transition-timing-function"]=O[q+"animation-name"]=O[q+"animation-duration"]="",te(!1),{reset:te,order:$,filter:Z,prev:H,next:J,jumpTo:K,drag:Q,currentItem:b,numItems:U,remove:ie,add:ee,isVisible:Y,getVisible:ne}};Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Array.prototype.indexOf||(Array.prototype.indexOf=function(t){"use strict";if(null==this)throw new TypeError;var e,i,n=Object(this),r=n.length>>>0;if(0===r)return-1;if(e=0,arguments.length>0&&(e=Number(arguments[1]),e!=e?e=0:0!=e&&1/0!=e&&e!=-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e)))),e>=r)return-1;for(i=e>=0?e:Math.max(r-Math.abs(e),0);r>i;i++)if(i in n&&n[i]===t)return i;return-1});